<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuoteFlow - MSME Quotation Manager</title>
    <meta name="description" content="Professional quotation management system for MSMEs">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="container">
            <div class="header-content">
                <div class="brand">
                    <svg class="brand-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="6" fill="url(#gradient)"/>
                        <path d="M8 12h16M8 16h12M8 20h8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop offset="0%" stop-color="#667eea"/>
                                <stop offset="100%" stop-color="#764ba2"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <div>
                        <h1 class="brand-title">QuoteFlow</h1>
                        <p class="brand-subtitle">Professional Quotation Manager</p>
                    </div>
                </div>
                <button class="btn-help" id="helpBtn" aria-label="Help">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="app-nav">
        <div class="container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="create">Create Quote</button>
                <button class="nav-tab" data-tab="quotations">My Quotations</button>
                <button class="nav-tab" data-tab="templates">Templates</button>
                <button class="nav-tab" data-tab="analytics">Analytics</button>
                <button class="nav-tab" data-tab="favorites">Favorites</button>
                <button class="nav-tab" data-tab="settings">Settings</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="app-main">
        <div class="container">
            <!-- Create Quote Tab -->
            <div id="createTab" class="tab-content active">
                <div class="section-header">
                    <h2>Create New Quotation</h2>
                    <div class="header-actions">
                        <button class="btn-secondary" id="loadTemplateBtn">Load Template</button>
                        <button class="btn-secondary" id="clearFormBtn">Clear Form</button>
                    </div>
                </div>

                <form id="quoteForm" class="quote-form">
                    <!-- Customer Details -->
                    <div class="form-section">
                        <h3 class="form-section-title">Customer Details</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="customerName">Customer Name *</label>
                                <input type="text" id="customerName" required autocomplete="name">
                            </div>
                            <div class="form-group">
                                <label for="companyName">Company Name</label>
                                <input type="text" id="companyName" autocomplete="organization">
                            </div>
                            <div class="form-group">
                                <label for="customerEmail">Email</label>
                                <input type="email" id="customerEmail" autocomplete="email">
                            </div>
                            <div class="form-group">
                                <label for="customerPhone">Phone</label>
                                <input type="tel" id="customerPhone" autocomplete="tel">
                            </div>
                            <div class="form-group">
                                <label for="customerGSTIN">GSTIN</label>
                                <input type="text" id="customerGSTIN" pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}" placeholder="22AAAAA0000A1Z5">
                            </div>
                            <div class="form-group">
                                <label for="billingAddress">Billing Address</label>
                                <input type="text" id="billingAddress">
                            </div>
                        </div>
                    </div>

                    <!-- Items Section -->
                    <div class="form-section">
                        <div class="section-title-row">
                            <h3 class="form-section-title">Items / Services</h3>
                            <button type="button" class="btn-primary" id="addItemBtn">+ Add Item</button>
                        </div>
                        <div id="itemsList" class="items-list">
                            <!-- Items will be added here dynamically -->
                        </div>
                    </div>

                    <!-- Calculations Section -->
                    <div class="form-section">
                        <h3 class="form-section-title">Calculations</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="gstRate">GST Rate (%)</label>
                                <select id="gstRate">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="12">12%</option>
                                    <option value="18" selected>18%</option>
                                    <option value="28">28%</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="discountRate">Discount (%)</label>
                                <input type="number" id="discountRate" min="0" max="100" value="0" step="0.1">
                            </div>
                        </div>
                        <div class="calculation-summary">
                            <div class="calc-row">
                                <span>Subtotal:</span>
                                <span id="subtotalDisplay">‚Çπ0.00</span>
                            </div>
                            <div class="calc-row">
                                <span>Discount:</span>
                                <span id="discountDisplay">‚Çπ0.00</span>
                            </div>
                            <div class="calc-row">
                                <span>GST:</span>
                                <span id="gstDisplay">‚Çπ0.00</span>
                            </div>
                            <div class="calc-row total">
                                <span>Total Amount:</span>
                                <span id="totalDisplay">‚Çπ0.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Details -->
                    <div class="form-section">
                        <h3 class="form-section-title">Additional Details</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="validityDays">Validity (Days)</label>
                                <input type="number" id="validityDays" min="1" value="30">
                            </div>
                            <div class="form-group">
                                <label for="paymentTerms">Payment Terms</label>
                                <select id="paymentTerms">
                                    <option value="Immediate">Immediate</option>
                                    <option value="Net 7">Net 7 Days</option>
                                    <option value="Net 15">Net 15 Days</option>
                                    <option value="Net 30" selected>Net 30 Days</option>
                                    <option value="50% Advance">50% Advance, 50% on Delivery</option>
                                    <option value="Custom">Custom</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="specialNotes">Special Notes / Terms &amp; Conditions</label>
                            <textarea id="specialNotes" rows="4" placeholder="Enter any special notes, terms, or conditions..."></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="saveDraftBtn">Save as Draft</button>
                        <button type="submit" class="btn-primary btn-large">Generate Quotation</button>
                    </div>
                </form>
            </div>

            <!-- My Quotations Tab -->
            <div id="quotationsTab" class="tab-content">
                <div class="section-header">
                    <h2>My Quotations</h2>
                    <div class="header-actions">
                        <button class="btn-secondary" id="exportAllBtn">Export All</button>
                        <button class="btn-secondary" id="bulkDeleteBtn" style="display:none;">Delete Selected</button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="filters-bar">
                    <div class="search-box">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        <input type="text" id="searchQuotes" placeholder="Search by customer, company, or quote ID...">
                    </div>
                    <select id="filterStatus" class="filter-select">
                        <option value="all">All Status</option>
                        <option value="draft">Draft</option>
                        <option value="sent">Sent</option>
                        <option value="accepted">Accepted</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <select id="sortBy" class="filter-select">
                        <option value="date-desc">Newest First</option>
                        <option value="date-asc">Oldest First</option>
                        <option value="amount-desc">Highest Amount</option>
                        <option value="amount-asc">Lowest Amount</option>
                    </select>
                </div>

                <div id="quotationsList" class="quotations-grid">
                    <!-- Quotations will be rendered here -->
                </div>
            </div>

            <!-- Templates Tab -->
            <div id="templatesTab" class="tab-content">
                <div class="section-header">
                    <h2>Quick Start Templates</h2>
                    <p class="section-description">Start with pre-configured templates for common quotation types</p>
                </div>

                <div class="templates-grid">
                    <div class="template-card" data-template="product">
                        <div class="template-icon">üì¶</div>
                        <h3>Product Quote</h3>
                        <p>For selling physical products with quantities and variants</p>
                        <button class="btn-primary">Use Template</button>
                    </div>
                    <div class="template-card" data-template="service">
                        <div class="template-icon">üõ†Ô∏è</div>
                        <h3>Service Quote</h3>
                        <p>For service-based businesses with hourly or project rates</p>
                        <button class="btn-primary">Use Template</button>
                    </div>
                    <div class="template-card" data-template="project">
                        <div class="template-icon">üèóÔ∏è</div>
                        <h3>Project Quote</h3>
                        <p>For complex projects with milestones and phases</p>
                        <button class="btn-primary">Use Template</button>
                    </div>
                    <div class="template-card" data-template="amc">
                        <div class="template-icon">üîß</div>
                        <h3>AMC Quote</h3>
                        <p>For annual maintenance contracts with recurring terms</p>
                        <button class="btn-primary">Use Template</button>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analyticsTab" class="tab-content">
                <div class="section-header">
                    <h2>Analytics &amp; Insights</h2>
                </div>

                <div class="analytics-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-1);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Total Quotes</p>
                            <p class="stat-value" id="statTotalQuotes">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-3);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2e7d32" stroke-width="2">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Total Value</p>
                            <p class="stat-value" id="statTotalValue">‚Çπ0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-2);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f57c00" stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Conversion Rate</p>
                            <p class="stat-value" id="statConversionRate">0%</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-4);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#d32f2f" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Active Quotes</p>
                            <p class="stat-value" id="statActiveQuotes">0</p>
                        </div>
                    </div>
                </div>

                <div class="analytics-section">
                    <h3>Recent Activity</h3>
                    <div id="recentActivity" class="activity-list">
                        <!-- Activity items will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Favorites Tab -->
            <div id="favoritesTab" class="tab-content">
                <div class="section-header">
                    <h2>Favorites &amp; Quick Items</h2>
                    <p class="section-description">Save frequently used items and customers for quick access</p>
                </div>

                <div class="favorites-section">
                    <div class="favorites-header">
                        <h3>Saved Items</h3>
                        <button class="btn-primary" id="addFavoriteItemBtn">+ Add Item</button>
                    </div>
                    <div id="favoriteItemsList" class="favorites-list">
                        <!-- Favorite items will be rendered here -->
                    </div>
                </div>

                <div class="favorites-section">
                    <div class="favorites-header">
                        <h3>Saved Customers</h3>
                    </div>
                    <div id="favoriteCustomersList" class="favorites-list">
                        <!-- Favorite customers will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settingsTab" class="tab-content">
                <div class="section-header">
                    <h2>Settings &amp; Configuration</h2>
                </div>

                <div class="settings-sections">
                    <div class="settings-section">
                        <h3>Company Information</h3>
                        <div class="form-group">
                            <label for="settingsCompanyName">Company Name</label>
                            <input type="text" id="settingsCompanyName">
                        </div>
                        <div class="form-group">
                            <label for="settingsGSTIN">GSTIN</label>
                            <input type="text" id="settingsGSTIN" pattern="[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}">
                        </div>
                        <div class="form-group">
                            <label for="settingsAddress">Address</label>
                            <textarea id="settingsAddress" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="settingsEmail">Email</label>
                            <input type="email" id="settingsEmail">
                        </div>
                        <div class="form-group">
                            <label for="settingsPhone">Phone</label>
                            <input type="tel" id="settingsPhone">
                        </div>
                        <div class="form-group">
                            <label for="settingsLogoUrl">Logo URL</label>
                            <input type="url" id="settingsLogoUrl" placeholder="https://example.com/logo.png">
                        </div>
                        <button class="btn-primary" id="saveCompanyInfoBtn">Save Company Info</button>
                    </div>

                    <div class="settings-section">
                        <h3>Default Settings</h3>
                        <div class="form-group">
                            <label for="settingsDefaultGST">Default GST Rate (%)</label>
                            <select id="settingsDefaultGST">
                                <option value="0">0%</option>
                                <option value="5">5%</option>
                                <option value="12">12%</option>
                                <option value="18" selected>18%</option>
                                <option value="28">28%</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="settingsDefaultValidity">Default Validity (Days)</label>
                            <input type="number" id="settingsDefaultValidity" value="30" min="1">
                        </div>
                        <div class="form-group">
                            <label for="settingsDefaultPaymentTerms">Default Payment Terms</label>
                            <input type="text" id="settingsDefaultPaymentTerms" value="Net 30 Days">
                        </div>
                        <button class="btn-primary" id="saveDefaultsBtn">Save Defaults</button>
                    </div>

                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <div class="data-actions">
                            <button class="btn-secondary" id="exportDataBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Export All Data
                            </button>
                            <button class="btn-secondary" id="importDataBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Import Data
                            </button>
                            <button class="btn-danger" id="resetAppBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="1 4 1 10 7 10"/>
                                    <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                                </svg>
                                Reset All Data
                            </button>
                        </div>
                        <input type="file" id="importFileInput" accept=".json" style="display:none;">
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Quote Preview Modal -->
    <div id="quotePreviewModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Quotation Preview</h2>
                <button class="modal-close" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body" id="quotePreviewContent">
                <!-- Preview content will be rendered here -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="printQuoteBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 6 2 18 2 18 9"/>
                        <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                        <rect x="6" y="14" width="12" height="8"/>
                    </svg>
                    Print / PDF
                </button>
                <button class="btn-secondary" id="emailQuoteBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                        <polyline points="22,6 12,13 2,6"/>
                    </svg>
                    Email
                </button>
                <button class="btn-primary" id="whatsappQuoteBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                    </svg>
                    WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container" aria-live="polite"></div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="container">
            <p>&copy; 2025 QuoteFlow v1.0 | Professional Quotation Management System</p>
        </div>
    </footer>

    <link rel="stylesheet" href="style.css">
    <script src="app.js"></script>
</body>
</html>