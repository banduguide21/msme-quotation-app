<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSME Quotation App - GST Optional & TDS Compliant</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üíº MSME Quotation App</h1>
            <p class="subtitle">Professional quotations in 60 seconds | GST Optional | TDS Compliant</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="create">Create Quote</button>
            <button class="tab-btn" data-tab="list">My Quotations</button>
            <button class="tab-btn" data-tab="analytics">üìä Analytics</button>
            <button class="tab-btn" data-tab="templates">Templates</button>
            <button class="tab-btn" data-tab="complianceNotes">üìã Tax Compliance</button>
            <button class="tab-btn" data-tab="settings">Settings</button>
        </div>

        <!-- Create Quote Tab -->
        <div id="create" class="tab-content active">
            <form id="quoteForm" class="form-grid">
                <!-- Customer Section -->
                <fieldset class="form-section">
                    <legend>Customer Details</legend>
                    
                    <label>Customer Name *</label>
                    <input type="text" id="customerName" placeholder="Enter customer name" required>
                    
                    <label>Company Name</label>
                    <input type="text" id="companyName" placeholder="Customer's company (optional)">
                    
                    <label>Email/Phone</label>
                    <input type="text" id="customerEmail" placeholder="Email or phone number">
                    
                    <label>Customer GSTIN (optional)</label>
                    <input type="text" id="gstin" placeholder="18-digit GSTIN (optional)">
                </fieldset>

                <!-- Quote Items Section -->
                <fieldset class="form-section">
                    <legend>Quote Items (Add Line Items)</legend>
                    <div id="itemsContainer"></div>
                    <button type="button" id="addItemBtn" class="btn-secondary">+ Add Item/Service</button>
                </fieldset>

                <!-- Indian Tax Compliance Section -->
                <fieldset class="form-section">
                    <legend>üí∞ Taxes & Deductions (Indian Compliance)</legend>
                    
                    <!-- GST Section -->
                    <div class="tax-subsection">
                        <h5>Goods & Services Tax (GST)</h5>
                        <label style="display: flex; align-items: center; margin-bottom: 15px;">
                            <input type="checkbox" id="gstApplicable" checked style="width: 20px; height: 20px; margin-right: 10px;">
                            <span><strong>GST Applicable</strong> (Check if you are GST registered)</span>
                        </label>
                        
                        <div id="gstSection">
                            <label>GST Rate (%)</label>
                            <select id="gstRate">
                                <option value="0">0% (Nil-rated/Exempt supplies)</option>
                                <option value="5">5% (Food items, books, medicines)</option>
                                <option value="12">12% (Standard rate items)</option>
                                <option value="18" selected>18% (Most goods & services)</option>
                                <option value="28">28% (Luxury items, sin goods)</option>
                                <option value="custom">Custom Rate</option>
                            </select>
                            
                            <div id="customGstDiv" style="display: none; margin-top: 10px;">
                                <label>Enter Custom GST Rate (%)</label>
                                <input type="number" id="customGstValue" placeholder="e.g., 2.5" min="0" max="100" step="0.01">
                            </div>
                            
                            <label style="margin-top: 12px;">GST Exemption Type</label>
                            <select id="gstExemptionType">
                                <option value="normal">Normal (Taxable supply)</option>
                                <option value="exempt">Exempt (No GST, non-registered)</option>
                                <option value="nilrated">Nil-rated (0% GST, ITC available)</option>
                                <option value="zerorated">Zero-rated (0% GST, Export)</option>
                            </select>
                            
                            <label style="margin-top: 12px;">Your GSTIN (if registered)</label>
                            <input type="text" id="yourGstinOptional" placeholder="18-digit GSTIN (optional)">
                        </div>
                    </div>
                    
                    <!-- TDS Section -->
                    <div class="tax-subsection" style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                        <h5>Tax Deducted at Source (TDS)</h5>
                        
                        <label style="display: flex; align-items: center; margin-bottom: 15px;">
                            <input type="checkbox" id="tdsApplicable" style="width: 20px; height: 20px; margin-right: 10px;">
                            <span><strong>TDS Applicable</strong> (Check if client will deduct tax at source)</span>
                        </label>
                        
                        <div id="tdsSection" style="display: none;">
                            <label>Select TDS Section</label>
                            <select id="tdsSectionType">
                                <option value="194c">Section 194C - Contractor/Labour Services (1-2%)</option>
                                <option value="194j">Section 194J - Professional Services (10%)</option>
                                <option value="194o">Section 194O - E-commerce (1%)</option>
                                <option value="194ad">Section 194AD - Work Contract (2%)</option>
                                <option value="194la">Section 194LA - Goods Transport (1%)</option>
                                <option value="194lb">Section 194LB - Goods Sale (2%)</option>
                                <option value="custom">Custom TDS Rate</option>
                            </select>
                            
                            <label style="margin-top: 12px;">TDS Rate (%)</label>
                            <input type="number" id="tdsRate" placeholder="Auto-filled based on section" readonly style="background: #f0f0f0;">
                            
                            <label style="margin-top: 12px;">TDS Applies To</label>
                            <select id="tdsAppliesTo">
                                <option value="all">Entire invoice amount (after discount, before GST)</option>
                                <option value="abovebasic">Amount above basic exemption (‚Çπ30,000 for 194J)</option>
                                <option value="manual">Manual amount selection</option>
                            </select>
                            
                            <div id="tdsManualAmount" style="display: none; margin-top: 10px;">
                                <label>Amount on which TDS applies (‚Çπ)</label>
                                <input type="number" id="tdsManualValue" placeholder="Enter amount" min="0" step="0.01">
                            </div>
                            
                            <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 12px; border-radius: 6px; margin-top: 15px;">
                                <p style="margin: 0; color: #856404;">
                                    <strong>‚ÑπÔ∏è TDS Note:</strong> The quoted amount will be reduced by TDS amount at source. 
                                    You will receive payment = Invoice Total - TDS Amount.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Discount Section -->
                    <div class="tax-subsection" style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                        <h5>Discount</h5>
                        
                        <label>Discount Type</label>
                        <select id="discountType" onchange="updateDiscountUI()">
                            <option value="percentage">Percentage (%)</option>
                            <option value="fixed">Fixed Amount (‚Çπ)</option>
                        </select>
                        
                        <label style="margin-top: 12px;">Discount Value</label>
                        <input type="number" id="discount" placeholder="0" min="0" step="0.01">
                        
                        <label style="margin-top: 12px;">Discount Reason (optional)</label>
                        <input type="text" id="discountReason" placeholder="e.g., Early payment, bulk order, promotional offer">
                    </div>
                    
                    <!-- Payment Terms -->
                    <div class="tax-subsection" style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                        <h5>Payment Terms & Validity</h5>
                        
                        <label>Payment Terms *</label>
                        <textarea id="paymentTerms" placeholder="e.g., 50% advance, balance on delivery" rows="3"></textarea>
                        
                        <label style="margin-top: 12px;">Quote Validity (Days) *</label>
                        <input type="number" id="validity" value="7" min="1" required>
                    </div>
                </fieldset>

                <!-- Company & Notes Section -->
                <fieldset class="form-section">
                    <legend>Your Company & Notes</legend>
                    
                    <label>Your Company Name *</label>
                    <input type="text" id="yourCompanyName" placeholder="Your business name" required>
                    
                    <label>Your Company GSTIN</label>
                    <input type="text" id="yourGstin" placeholder="Your 18-digit GSTIN">
                    
                    <label>Your Logo (Image URL, optional)</label>
                    <input type="text" id="logoUrl" placeholder="https://example.com/logo.png">
                    
                    <label>Special Notes / Terms</label>
                    <textarea id="specialNotes" placeholder="Add any special notes, warranty, T&Cs, etc." rows="3"></textarea>
                </fieldset>

                <!-- Buttons -->
                <div class="form-actions">
                    <button type="submit" class="btn-primary">üìÑ Generate Quote</button>
                    <button type="reset" class="btn-secondary">Clear Form</button>
                </div>
            </form>
        </div>

        <!-- My Quotations Tab -->
        <div id="list" class="tab-content">
            <div class="list-controls">
                <input type="text" id="searchQuotes" placeholder="Search quotations..." class="search-box">
                <button id="clearAllBtn" class="btn-danger">Delete All</button>
            </div>
            <div id="quotationsList" class="quotations-grid"></div>
            <p id="emptyMessage" style="text-align: center; color: #666; margin-top: 20px;">
                No quotations yet. Create one to get started!
            </p>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <h3>üìä Quote Analytics Dashboard</h3>
            <div class="analytics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="totalQuotes">0</div>
                    <div class="metric-label">Total Quotations</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalValue">‚Çπ0</div>
                    <div class="metric-label">Total Value</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="conversionRate">0%</div>
                    <div class="metric-label">Conversion Rate</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="activeQuotes">0</div>
                    <div class="metric-label">Active Quotes</div>
                </div>
            </div>
            
            <div class="analytics-section">
                <h4>üìà Top Customers (by quote frequency)</h4>
                <div id="topCustomers" class="customer-list"></div>
            </div>
            
            <div class="analytics-section">
                <h4>‚è∞ Recently Created</h4>
                <div id="recentQuotes" class="recent-list"></div>
            </div>
            
            <div class="analytics-section">
                <h4>‚è≥ Expiring Soon (Next 7 Days)</h4>
                <div id="expiringQuotes" class="expiring-list"></div>
            </div>
        </div>

        <!-- Templates Tab -->
        <div id="templates" class="tab-content">
            <h3>Quote Templates</h3>
            <div class="templates-grid">
                <div class="template-card" data-template="product">
                    <h4>üì¶ Product Quote</h4>
                    <p>For selling physical products with SKUs and quantities.</p>
                    <button class="btn-secondary" onclick="loadTemplate('product')">Use Template</button>
                </div>
                <div class="template-card" data-template="service">
                    <h4>üõ†Ô∏è Service Quote</h4>
                    <p>For hourly/project-based services and consultations.</p>
                    <button class="btn-secondary" onclick="loadTemplate('service')">Use Template</button>
                </div>
                <div class="template-card" data-template="project">
                    <h4>üèóÔ∏è Project Estimate</h4>
                    <p>For construction, development, or multi-phase projects.</p>
                    <button class="btn-secondary" onclick="loadTemplate('project')">Use Template</button>
                </div>
                <div class="template-card" data-template="amc">
                    <h4>üîß AMC / Maintenance</h4>
                    <p>For annual maintenance contracts with recurring schedules.</p>
                    <button class="btn-secondary" onclick="loadTemplate('amc')">Use Template</button>
                </div>
            </div>
        </div>

        <!-- Tax Compliance Tab -->
        <div id="complianceNotes" class="tab-content">
            <h3>üìã Tax Compliance Information</h3>
            
            <div class="compliance-card">
                <h4>üáÆüá≥ Indian GST Compliance</h4>
                <div id="gstComplianceText" class="compliance-text"></div>
            </div>
            
            <div class="compliance-card">
                <h4>üí∞ TDS Information</h4>
                <div id="tdsComplianceText" class="compliance-text"></div>
            </div>
            
            <div class="compliance-card">
                <h4>üìë Important Notes for MSMEs</h4>
                <ul style="color: #555; line-height: 1.8;">
                    <li><strong>GST Registration:</strong> Mandatory if turnover > ‚Çπ20 lakhs (FY 2023-24)</li>
                    <li><strong>TDS Filing:</strong> If TDS is deducted, file Form 16A and report in ITR</li>
                    <li><strong>Invoice Format:</strong> GST invoices must include GSTIN, HSN/SAC codes, tax details</li>
                    <li><strong>Payment:</strong> GST due by 20th of next month; ITC claim by 30th</li>
                    <li><strong>Records:</strong> Maintain invoices and GST documents for 6 years</li>
                    <li><strong>E-invoicing:</strong> Mandatory if turnover > ‚Çπ50 crores</li>
                </ul>
            </div>
            
            <div class="compliance-card">
                <h4>üìû When to Consult CA/Tax Professional</h4>
                <ul style="color: #555; line-height: 1.8;">
                    <li>Before registering for GST</li>
                    <li>When TDS is deducted from your payments</li>
                    <li>For inter-state supplies and reverse charge</li>
                    <li>Annual income tax filing and reconciliation</li>
                    <li>When business structure changes</li>
                </ul>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <h3>‚öôÔ∏è App Settings</h3>
            <fieldset class="form-section">
                <legend>Default Company Info</legend>
                <label>Default Company Name</label>
                <input type="text" id="settingsCompanyName" placeholder="Your business name">
                
                <label>Default GSTIN</label>
                <input type="text" id="settingsGstin" placeholder="Your 18-digit GSTIN">
                
                <label>Default Logo URL</label>
                <input type="text" id="settingsLogoUrl" placeholder="https://example.com/logo.png">
                
                <label>Default Payment Terms</label>
                <textarea id="settingsPaymentTerms" placeholder="Default payment terms" rows="3"></textarea>
                
                <button type="button" id="saveSettingsBtn" class="btn-primary">üíæ Save Settings</button>
            </fieldset>

            <fieldset class="form-section">
                <legend>Data Management</legend>
                <button type="button" id="exportDataBtn" class="btn-secondary">üì• Export All Data (JSON)</button>
                <button type="button" id="importDataBtn" class="btn-secondary">üì§ Import Data (JSON)</button>
                <input type="file" id="fileInput" accept=".json" style="display: none;">
                <button type="button" id="resetAppBtn" class="btn-danger">üîÑ Reset App (Delete Everything)</button>
            </fieldset>

            <div id="settingsMessage" class="message" style="display: none;"></div>
        </div>
    </div>

    <!-- Quote Preview Modal -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="previewContent" class="quote-preview"></div>
            <div class="modal-actions">
                <button id="downloadPdfBtn" class="btn-primary">üì• Download PDF</button>
                <button id="shareWhatsappBtn" class="btn-secondary">üì± Share on WhatsApp</button>
                <button id="shareEmailBtn" class="btn-secondary">üìß Email Quote</button>
                <button id="printQuoteBtn" class="btn-secondary">üñ®Ô∏è Print</button>
                <button id="closeModalBtn" class="btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>üí° MSME Quotation App v3.0 | GST Optional | TDS Compliant | Free Tool for Indian MSMEs</p>
        <p><small>Built with ‚ù§Ô∏è for small business owners | Data stored locally in your browser</small></p>
    </footer>

    <script src="app.js"></script>
</body>
</html>